#!/bin/bash


# colors
red='\033[0;31m'
blue='\033[0;34m'
green='\033[0;32m'
purple='\033[0;35m'
NC='\033[0m' # No Color



case $1 in

# install a program
  -i)
    echo -e "${blue}creating list file"
     touch pkg-files
     echo -e "${green}Downloading${purple}"
     axel -a --output=$2-pkg https://raw.githubusercontent.com/hexisXz/hexpmg/main/pkg-files/$2-pkg 2> /dev/null

    case $? in
	 1)
          echo -e "${red}Error wrong URL" && exit 1

	 ;;
    esac

    source ~/"$2-pkg" && echo "$2" >> pkg-files

    ;;

# remove a program
  -R)
    echo -e "${red}removing program"
    sudo rm /bin/$2 && sudo rm -r $2

    e=$(ls | grep -i $2-pkg)

    if command -v $e >/dev/null; then
	    echo -e "${green}Done"
 	    exit 1
    else
       echo -e "${red}removing pkg file"
       rm $2-pkg
       echo -e "${green}Done"
    fi

    ;;


  -up)
     echo -e "${green}updating${purple}"
     sudo rm /bin/hexpmg && sudo rm -r hexpmg && git clone https://github.com/hexisXz/hexpmg.git && chmod +x ~/hexpmg/hexpmg && sudo mv ~/hexpmg/hexpmg /bin/

     ;;
# remove all -pkg files
  -RAP)
      rm *-pkg 2> /dev/null

      case $? in
	   1)
	    echo -e "${blue}nothing to do"
	    echo -e "${green}no pkg files on the system"

	   ;;
           0)
            echo -e "${green}removed all pkg files"
	   ;;
      esac


    ;;
# list all installed programs
  -l)
    cat pkg-files
    ;;

# display a list of all commands
  -h)
    echo -e "${blue}usage: [-i install a program

        -R remove a program

        -l list all installed programs

        -RAP Remove All -pkg files]"
   ;;
  *)
   echo -e "${blue}usage: [-i install a program

        -R remove a program

        -l list all installed programs

        -RAP Remove All -pkg files]"

   ;;
esac
